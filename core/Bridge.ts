export class Bridge {
  data = {
    objData: [
      {
        family: 'inWall',
        class: 'doorWindow',
        type: 'double',
        x: 810,
        y: 194,
        angle: 180,
        angleSign: 0,
        limit: [
          {
            x: 765,
            y: 194,
          },
          {
            x: 855,
            y: 194,
          },
        ],
        hinge: 'normal',
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        scale: {
          x: 1,
          y: 1,
        },
        size: '90',
        thick: 20,
        width: '1.50',
        fill: '#eee',
        bbox: {
          x: 765,
          y: 184,
          width: 90,
          height: 65,
          top: 184,
          right: 855,
          bottom: 249,
          left: 765,
        },
        realBbox: [
          {
            x: 855,
            y: 204,
          },
          {
            x: 765,
            y: 204,
          },
          {
            x: 765,
            y: 184,
          },
          {
            x: 855,
            y: 184,
          },
        ],
        params: {
          bindBox: false,
          move: false,
          resize: true,
          resizeLimit: {
            width: {
              min: 40,
              max: 160,
            },
            height: {
              min: false,
              max: false,
            },
            columnHeight: {
              min: false,
              max: false,
            },
          },
          rotate: false,
          columnHeight: false,
          beamHeight: false,
          waistSlabThickness: false,
          stepsBase: false,
          stepsHeight: false,
          slabFloorOffsetHeight: false,
          typeColumn: false,
          typeBeam: false,
          typeSlabFloor: false,
          demolish: false,
        },
        height: '120',
        up: [
          {
            x: 765,
            y: 204,
            distance: 10,
          },
          {
            x: 855,
            y: 204,
            distance: 10,
          },
        ],
        down: [
          {
            x: 765,
            y: 184,
            distance: 10,
          },
          {
            x: 855,
            y: 184,
            distance: 10,
          },
        ],
        sillHeight: '50',
        area: '3.00',
      },
      {
        family: 'inWall',
        class: 'doorWindow',
        type: 'twin',
        x: 540,
        y: 367,
        angle: 90,
        angleSign: 0,
        limit: [
          {
            x: 540,
            y: 337,
          },
          {
            x: 540,
            y: 397,
          },
        ],
        hinge: 'normal',
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        scale: {
          x: 1,
          y: 1,
        },
        size: 60,
        thick: 20,
        width: '1.00',
        fill: '#eee',
        bbox: {
          x: 530,
          y: 337,
          width: 35,
          height: 60,
          top: 337,
          right: 565,
          bottom: 397,
          left: 530,
        },
        realBbox: [
          {
            x: 550,
            y: 337,
          },
          {
            x: 550,
            y: 397,
          },
          {
            x: 530,
            y: 397,
          },
          {
            x: 530,
            y: 337,
          },
        ],
        params: {
          bindBox: false,
          move: false,
          resize: true,
          resizeLimit: {
            width: {
              min: 40,
              max: 200,
            },
            height: {
              min: false,
              max: false,
            },
            columnHeight: {
              min: false,
              max: false,
            },
          },
          rotate: false,
          columnHeight: false,
          beamHeight: false,
          waistSlabThickness: false,
          stepsBase: false,
          stepsHeight: false,
          slabFloorOffsetHeight: false,
          typeColumn: false,
          typeBeam: false,
          typeSlabFloor: false,
          demolish: false,
        },
        height: '80',
        up: [
          {
            x: 550,
            y: 337,
            distance: 10,
          },
          {
            x: 550,
            y: 397,
            distance: 10,
          },
        ],
        down: [
          {
            x: 530,
            y: 337,
            distance: 10,
          },
          {
            x: 530,
            y: 397,
            distance: 10,
          },
        ],
        sillHeight: '90',
        area: '1.33',
      },
      {
        family: 'inWall',
        class: 'doorWindow',
        type: 'bay',
        x: 1080,
        y: 567,
        angle: 450,
        angleSign: 1,
        limit: [
          {
            x: 1080,
            y: 507,
          },
          {
            x: 1080,
            y: 627,
          },
        ],
        hinge: 'normal',
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        scale: {
          x: 1,
          y: 1,
        },
        size: '120',
        thick: 20,
        width: '2.00',
        fill: '#eee',
        bbox: {
          x: 1070,
          y: 507,
          width: 20,
          height: 120,
          top: 507,
          right: 1090,
          bottom: 627,
          left: 1070,
        },
        realBbox: [
          {
            x: 1090,
            y: 507,
          },
          {
            x: 1090,
            y: 627,
          },
          {
            x: 1070,
            y: 627,
          },
          {
            x: 1070,
            y: 507,
          },
        ],
        params: {
          bindBox: false,
          move: false,
          resize: true,
          resizeLimit: {
            width: {
              min: 60,
              max: 300,
            },
            height: {
              min: false,
              max: false,
            },
            columnHeight: {
              min: false,
              max: false,
            },
          },
          rotate: false,
          columnHeight: false,
          beamHeight: false,
          waistSlabThickness: false,
          stepsBase: false,
          stepsHeight: false,
          slabFloorOffsetHeight: false,
          typeColumn: false,
          typeBeam: false,
          typeSlabFloor: false,
          demolish: false,
        },
        height: '120',
        up: [
          {
            x: 1070,
            y: 507,
            distance: 10,
          },
          {
            x: 1070,
            y: 627,
            distance: 10,
          },
        ],
        down: [
          {
            x: 1090,
            y: 507,
            distance: 10,
          },
          {
            x: 1090,
            y: 627,
            distance: 10,
          },
        ],
        sillHeight: '50',
        area: '4.00',
      },
    ],
    wallData: [
      {
        thick: 20,
        start: {
          x: 540,
          y: 194,
        },
        end: {
          x: 540,
          y: 734,
        },
        type: 'normal',
        parent: 3,
        child: 1,
        angle: 1.5707963267948966,
        equations: {
          up: {
            A: 'v',
            B: 550,
          },
          down: {
            A: 'v',
            B: 530,
          },
          base: {
            A: 'v',
            B: 540,
          },
        },
        coords: [
          {
            x: 550,
            y: 204,
          },
          {
            x: 530,
            y: 184,
          },
          {
            x: 530,
            y: 744,
          },
          {
            x: 550,
            y: 724,
          },
        ],
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        surface_area: 'NaN',
        transverse_area: 'NaN',
      },
      {
        thick: 20,
        start: {
          x: 540,
          y: 734,
        },
        end: {
          x: 1080,
          y: 734,
        },
        type: 'normal',
        parent: 0,
        child: 2,
        angle: 0,
        equations: {
          up: {
            A: 'h',
            B: 724,
          },
          down: {
            A: 'h',
            B: 744,
          },
          base: {
            A: 'h',
            B: 734,
          },
        },
        coords: [
          {
            x: 550,
            y: 724,
          },
          {
            x: 530,
            y: 744,
          },
          {
            x: 1090,
            y: 744,
          },
          {
            x: 1070,
            y: 724,
          },
        ],
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        surface_area: 'NaN',
        transverse_area: 'NaN',
      },
      {
        thick: 20,
        start: {
          x: 1080,
          y: 734,
        },
        end: {
          x: 1080,
          y: 194,
        },
        type: 'normal',
        parent: 1,
        child: 3,
        angle: -1.5707963267948966,
        equations: {
          up: {
            A: 'v',
            B: 1070,
          },
          down: {
            A: 'v',
            B: 1090,
          },
          base: {
            A: 'v',
            B: 1080,
          },
        },
        coords: [
          {
            x: 1070,
            y: 724,
          },
          {
            x: 1090,
            y: 744,
          },
          {
            x: 1090,
            y: 184,
          },
          {
            x: 1070,
            y: 204,
          },
        ],
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        surface_area: 'NaN',
        transverse_area: 'NaN',
      },
      {
        thick: 20,
        start: {
          x: 1080,
          y: 194,
        },
        end: {
          x: 540,
          y: 194,
        },
        type: 'normal',
        parent: 2,
        child: 0,
        angle: 3.141592653589793,
        equations: {
          up: {
            A: 'h',
            B: 204,
          },
          down: {
            A: 'h',
            B: 184,
          },
          base: {
            A: 'h',
            B: 194,
          },
        },
        coords: [
          {
            x: 1070,
            y: 204,
          },
          {
            x: 1090,
            y: 184,
          },
          {
            x: 530,
            y: 184,
          },
          {
            x: 550,
            y: 204,
          },
        ],
        graph: {
          '0': {},
          context: {},
          length: 1,
        },
        surface_area: 'NaN',
        transverse_area: 'NaN',
      },
    ],
    roomData: [
      {
        coords: [
          {
            x: 540,
            y: 734,
          },
          {
            x: 1080,
            y: 734,
          },
          {
            x: 1080,
            y: 194,
          },
          {
            x: 540,
            y: 194,
          },
          {
            x: 540,
            y: 734,
          },
        ],
        coordsOutside: [
          {
            x: 1090,
            y: 744,
          },
          {
            x: 1090,
            y: 184,
          },
          {
            x: 530,
            y: 184,
          },
          {
            x: 530,
            y: 744,
          },
          {
            x: 1090,
            y: 744,
          },
        ],
        coordsInside: [
          {
            x: 1070,
            y: 724,
          },
          {
            x: 1070,
            y: 204,
          },
          {
            x: 550,
            y: 204,
          },
          {
            x: 550,
            y: 724,
          },
          {
            x: 1070,
            y: 724,
          },
        ],
        inside: [],
        way: ['0', '2', '3', '1', '0'],
        area: 270400,
        surface: '',
        name: '',
        color: 'gradientWhite',
        showSurface: true,
        action: 'add',
      },
    ],
  };

  public measure(
    po: { x: number; y: number },
    pt: { x: number; y: number }
  ): number {
    return Math.sqrt(Math.pow(po.x - pt.x, 2) + Math.pow(po.y - pt.y, 2));
  }

  public objectOnWall(
    obj: { x: number; y: number },
    walls: { start: { x: number; y: number }; end: { x: number; y: number } }[]
  ): boolean {
    for (const wall of walls) {
      const a = this.measure(wall.start, wall.end);
      const b = this.measure(wall.start, { x: obj.x, y: obj.y });
      const c = this.measure({ x: obj.x, y: obj.y }, wall.end);
      if (b + c === a) {
        return true;
      }
    }

    return false;
  }

  public buildCorners() {
    let corners = [];
    for (const wall of this.data.wallData) {
      corners.push(wall.start.x / 100);
      corners.push(wall.start.y / 100);
    }
    return corners;
  }
}
